# replica-count-manager

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 0.1.0](https://img.shields.io/badge/AppVersion-0.1.0-informational?style=flat-square)

Provide an API alongside the native Kubernetes deployment controller to manage the pod replica count of deployment resources

**Homepage:** <https://github.com/calvinbui/teleport-sre-challenge/>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| calvinbui | <3604363+calvinbui@users.noreply.github.com> |  |

## Source Code

* <https://github.com/calvinbui/teleport-sre-challenge/>

## Providing an existing certificate secret

An pre-existing Kubernetes secret with the server and CA certificates can be provided given the following data keys:

- `ca.crt`: Root CA's public key
- `server.crt`: Server's public key
- `server.key`: Server's private key

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: certificates
type: Opaque
data:
  ca.crt: ""
  server.crt: ""
  server.key: ""
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` | Affinity for pod assignment |
| certificates.create | bool | `true` | Create a secret containing certificates |
| certificates.existingSecret | string | `""` | Existing secret containing your own certificates |
| deployment.annotation | object | `{}` | Annotations for deployment |
| extraEnv | object | `{}` | Extra environment variables for the container |
| extraVolumeMounts | list | `[]` | Extra volume mounts to add to the container |
| extraVolumes | list | `[]` | Extra volumes to add to the container |
| fullnameOverride | string | `""` | String to fully override common.names.fullname template |
| image.pullPolicy | string | `"IfNotPresent"` | Image pull policy |
| image.repository | string | `"replica-count-manager"` | Image repository |
| image.tag | string | `"0.1.0"` | Image tag |
| imagePullSecrets | list | `[]` | Specify registry secret names as an array |
| nameOverride | string | `""` | String to partially override common.names.fullname template (will maintain the release name) |
| nodeSelector | object | `{}` | Node labels for pod assignment |
| pdb.create | bool | `false` | Enable/disable a Pod Disruption Budget creation |
| pdb.maxUnavailable | string | `""` | Maximum number/percentage of pods that may be made unavailable |
| pdb.minAvailable | int | `1` | Minimum number/percentage of pods that should remain scheduled |
| persistence.accessModes | list | `["ReadWriteOnce"]` | Persistence access modes |
| persistence.annotations | object | `{}` | PersistentVolumeClaim annotations |
| persistence.enabled | bool | `true` | Enable data persistence using PVC |
| persistence.existingClaim | string | `""` | Name of an existing PVC to use |
| persistence.size | string | `"128Mi"` | PVC Storage Request for data volume |
| podAnnotations | object | `{}` | Annotations for pods |
| podSecurityContext.fsGroup | int | `10003` | Group ID for the filesystem used by pods |
| rbac.create | bool | `true` | Create a ClusterRole and ClusterRoleBinding for the Service Account |
| replicaCount | int | `1` | Number of replicas to deploy |
| resources | object | `{}` | The resources limits and requests for the pod |
| securityContext.allowPrivilegeEscalation | bool | `false` | Switch privilegeEscalation possibility on or off for containers |
| securityContext.capabilities | object | `{"drop":["ALL"]}` | Kernel capabilities available to the container |
| securityContext.privileged | bool | `false` | Enable privileged mode |
| securityContext.readOnlyRootFilesystem | bool | `true` | mount / (root) as a readonly filesystem on containers |
| securityContext.runAsNonRoot | bool | `true` | Force the containers to run as a non root user |
| securityContext.runAsUser | int | `10003` | User ID for the service user running the containers |
| service.grpc.port | int | `8080` | gRPC port |
| service.http.port | int | `8081` | HTTP port |
| service.type | string | `"ClusterIP"` | Kubernetes service type |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account |
| serviceAccount.create | bool | `true` | Specifies whether a service account should be created |
| serviceAccount.name | string | `""` | If not set and create is true, a name is generated using the fullname template |
| tolerations | list | `[]` | Tolerations for pod assignment |

## Appendix

Generated by running `helm-docs --template-files charts/replica-count-manager/README.md.gotmpl .`
